<script type="text/javascript">
    addons_menu = new dTree('addons_menu');
    addons_menu.config.inOrder = true;

    <% si = 0
    i = si %>
    addons_menu.add(<%= i %>, -1, '<%= _('ADDONS') %>');
    <% i += 1 %>

    <% if ad_active_and_user_permissions %>
    addons_menu.add(<%= i %>, <%= si %>, '<%= _('Auto_Dialer') %>', '<%= Web_Dir %>/autodialer/campaigns');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Campaign_Stats') %>', '<%= Web_Dir %>/autodialer/campaign_statistics');
    <% end %>

      addons_menu.add(<%= i %>, <%= si %>, '<%= _('Callback') %>', '<%= Web_Dir %>/functions/callback_settings');
      <% i += 1 %>


    addons_menu.add(<%= i %>, <%= si %>, '<%= _('Card_Groups') %>', '<%= Web_Dir %>/cardgroups/list');
    <% i += 1 %>
      <% if admin? %>
        addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Settings') %>', '<%= Web_Dir %>/functions/calling_cards_settings');
      <% end %>
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-2 %>, '<%= _('Cardgroup_Stats') %>', '<%= Web_Dir %>/cardgroups/cardgroups_stats');
    <% i += 1 %>
    <% if admin? or accountant? %>
      addons_menu.add(<%= i %>, <%= i-3 %>, '<%= _('Cardgroup_Aggregate') %>', '<%= Web_Dir %>/cardgroups/aggregate');
      <% i += 1 %>
    <% end %>


    addons_menu.add(<%= i %>, <%= si %>, '<%= _('Call_shop') %>', '<%= Web_Dir %>/groups/list');
    <% i += 1 %>

    <% if ccl_active? %>
      addons_menu.add(<%= i %>, <%= si %>, '<%= _('CCL_Active') %>');
      <% i += 1 %>
      <% a = i-1 -%>
      addons_menu.add(<%= i %>, <%= a %>, '<%= _('Settings') %>', '<%= Web_Dir %>/functions/ccl_settings');
      <% i += 1 %>
    <% end %>

    addons_menu.add(<%= i %>, <%= si %>, '<%= _('Monitorings') %>');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Alerts') %>', '<%= Web_Dir %>/alerts');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-2 %>, '<%= _('alert_contacts') %>', '<%= Web_Dir %>/alerts/contacts');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-3 %>, '<%= _('alert_schedules') %>', '<%= Web_Dir %>/alerts/schedules');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-4 %>, '<%= _('alert_groups') %>', '<%= Web_Dir %>/alerts/groups');
    <% i += 1 %>
    <% if admin? %>
      addons_menu.add(<%= i %>, <%= i-5 %>, '<%= _('Blocked_IPs') %>', '<%= Web_Dir %>/monitorings/blocked_ips');
      <% i += 1 %>
    <% end %>
    <% if monitorings_addon_active? %>
      addons_menu.add(<%= i %>, <%= i-6 %>, '<%= _('Settings') %>', '<%= Web_Dir %>/monitorings/settings');
      <% i += 1 %>
    <% end %>
    <% if gateways_enabled_for(current_user) or admin? %>
      addons_menu.add(<%= i %>, <%= si %>, '<%= _('Payment_Gateways') %>', '<%= Web_Dir %>/payment_gateways/configuration');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Payments') %>', '<%= Web_Dir %>/functions/settings_payments');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-2 %>, '<%= _('Vouchers') %>', '<%= Web_Dir %>/vouchers/vouchers');
      <% i += 1 %>
    <% end %>

    <% if pbx_active? %>
      addons_menu.add(<%= i %>, <%= si %>, '<%= _('Pbx_functions') %>', '<%= Web_Dir %>/pbx_functions/list');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('External_DIDs') %>', '<%= Web_Dir %>/functions/pbx_functions');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-2 %>, '<%= _('Ring_Groups') %>', '<%= Web_Dir %>/ringgroups');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-3 %>, '<%= _('VoiceMail') %>', '<%= Web_Dir %>/functions/settings_vm');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-4 %>, '<%= _('PhoneBook') %>', '<%= Web_Dir %>/phonebooks/list');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-5 %>, '<%= _('Music_On_Hold') %>', '<%= Web_Dir %>/functions/mohs');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-6 %>, '<%= _('Queues') %>', '<%= Web_Dir %>/ast_queues/list');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-7 %>, '<%= _('Pbx_pools') %>', '<%= Web_Dir %>/pbx_functions/pbx_pools_list');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-8 %>, '<%= _('IVR') %>', '<%= Web_Dir %>/ivr');
      <% i += 1 %>
      addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Timeperiods') %>', '<%= Web_Dir %>/ivr_time_periods');
      <% i += 1 %>
    <% end %>
    <% if provider_billing_active? %>
      addons_menu.add(<%= i %>, <%= si %>, '<%= _('Provider_billing') %>', '<%= Web_Dir %>/providers/billing');
      <% i += 1 %>
    <% end %>

    <% if rec_active? %>
      <% if show_recordings? or admin? %>
        addons_menu.add(<%= i %>, <%= si %>, '<%= _('Recordings') %>', '<%= Web_Dir %>/recordings/recordings', '', '', '<%= Web_Dir %>/images/dtree/musicfolder.gif', '<%= Web_Dir %>/images/dtree/musicfolder.gif');
        <% i += 1 %>
          <% if admin? %>
            addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Settings') %>', '<%= Web_Dir %>/functions/recordings_settings');
          <% end %>
          <% i += 1 %>
          addons_menu.add(<%= i %>, <%= i-2 %>, '<%= _('users') %>', '<%= Web_Dir %>/recordings/list_users');
        <% i += 1 %>
      <% end %>
    <% end %>

    addons_menu.add(<%= i %>, <%= si %>, '<%= _('Resellers') %>', '<%= Web_Dir %>/stats/resellers');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-1 %>, '<%= _('Common_use_providers') %>', '<%= Web_Dir %>/common_use_providers');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-2 %>, '<%= _('Settings') %>', '<%= Web_Dir %>/resellers/settings');
    <% i += 1 %>
    addons_menu.add(<%= i %>, <%= i-3 %>, '<%= _('Reseller_permissions') %>', '<%= Web_Dir %>/permissions/list?group_type=reseller');
    <% i += 1 %>

    <% if sms_active?%>
      addons_menu.add(<%= i %>, <%= si %>, '<%= _('SMS') %>', '<%= Web_Dir %>/sms/users');
      <% i += 1 -%>
      <% a = i-1 -%>
      <% if admin? %>
        addons_menu.add(<%= i %>, <%= a %>, '<%= _('Settings') %>', '<%= Web_Dir %>/functions/sms_settings');
        <% i += 1 -%>
      <% end %>
      addons_menu.add(<%= i %>, <%= a %>, '<%= _('Providers') %>', '<%= Web_Dir %>/sms/providers');
      <% i += 1 -%>
      addons_menu.add(<%= i %>, <%= a %>, '<%= _('Lcr') %>', '<%= Web_Dir %>/sms/lcrs');
      <% i += 1 -%>
      addons_menu.add(<%= i %>, <%= a %>, '<%= _('Mass_SMS') %>', '<%= Web_Dir %>/smsautodialer/user_campaigns');
      <% i += 1 -%>
    <% end %>

    $("addons_menu_div").innerHTML = addons_menu.toString();
</script>
